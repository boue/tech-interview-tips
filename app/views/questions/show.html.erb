<% content_for :title do %><%= @question.title %><% end %>

<div class="row">
  <div class="small-12 large-12 columns panel">
    <h1><%= @question.title %></h1>
    <p><%= markdown @question.content %></p>
    <hr>
    <% if current_user %>
      <p>
        <i class="fa fa-thumbs-up"></i>
        <i class="fa fa-floppy-o"></i>
      </p>
    <% end %>
    <% if current_user.id == @question.user.id %>
    <p class="text-right"><%= link_to "edit", edit_question_path(@question), class: "button [tiny small large]" %>
      <%= link_to "delete", question_path(@question), method: :delete, class: "button [tiny small large]" %></p>
    <% end %>
    <% if @question.user.provider == "github" %>
      <p class="text-right">Posted by: <%= link_to @question.user.name, "https://github.com/#{@question.user.name}" %><br>
    <% else %>
      <p class="text-right">Posted by: <%= @question.user.name %><br>
    <% end %>
    <%= time_ago_in_words(@question.created_at) %> ago</p>
  </div>
</div>

<div class="row">
  <div class="small-12 large-12 columns panel">
<% if current_user %>
<h3>Answer Question</h3>
  <%= render partial: "answers/new", locals: { question: @question } %>
<% else %>
  <h3>Please log in to answer!</h3>
<% end %>
  </div>
</div>

<% @question.answers.each do |answer| %>
  <div class="row">
    <div class="small-12 large-12 columns panel">
      <p><%= markdown answer.content %></p>
      <% if answer.user.provider == "github" %>
        <p class="text-right">Posted by: <%= link_to answer.user.name, "https://github.com/#{answer.user.name}" %><br>
      <% else %>
        <p class="text-right">Posted by: <%= answer.user.name %><br>
      <% end %>
      <%= time_ago_in_words(answer.created_at) %> ago</p>
    <%= render partial: "comments/new", locals: { question: @question, answer: answer } %>
    <%= render partial: "comments/show", locals: { answer: answer } %>
    </div>
  </div>
<% end %>